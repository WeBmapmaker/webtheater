// Created by Crowbar 0.56

$modelname "webcoop/weapons/v_yellow-m18.mdl"

$bodygroup "Weapon"
{
	studio "v_m18_m18_reference.smd"
}


$surfaceprop "default"

$contents "solid"

$illumposition 1.629 -4.84 -13.223

$cdmaterials "models/webcoop/weapons/yellow-m18/"

$cbox 0 0 0 0 0 0

$bbox -3.47 -9.984 -24.164 13.149 13.243 -2.282

$definebone "(null)" "" 1.983461 8.830967 -25.945992 0 -89.999928 0 0 0 0 0 0 0
$definebone "Pelvis" "(null)" 0 0 0 -89.999983 -89.999928 0 0 0 0 0 0 0
$definebone "Spine" "Pelvis" 3.24214 -0.005069 0.000005 -0.000057 0.045607 -0.000229 0 0 0 0 0 0
$definebone "Spine1" "Spine" 6.363438 -0.005069 0 0 0 0 0 0 0 0 0 0
$definebone "Neck" "Spine1" 6.363437 -0.002057 0 0 0 0 0 0 0 0 0 0
$definebone "L Clavicle" "" 3.491543 8.830969 -9.976974 0 0.000057 0 0 0 0 0 0 0
$definebone "L UpperArm" "L Clavicle" 5.853647 -0.000001 0 2.606709 -90.521181 -90.385902 0 0 0 0 0 0
$definebone "L Forearm" "L UpperArm" 10.390535 -0.000002 0.000001 0 -6.123427 0 0 0 0 0 0 0
$definebone "L Hand" "L Forearm" 8.525424 -0.000001 0 2.753062 3.862882 -91.214711 0 0 0 0 0 0
$definebone "L Finger0" "L Hand" 0.555143 0.315172 -0.822495 36.110722 33.914174 115.151567 0 0 0 0 0 0
$definebone "L Finger01" "L Finger0" 1.556972 0.000001 -0.000002 -0.000003 9.52932 0 0 0 0 0 0 0
$definebone "L Finger02" "L Finger01" 1.22109 -0.000001 0.000002 -0.000007 13.764623 -0.000001 0 0 0 0 0 0
$definebone "L Finger1" "L Hand" 2.828094 -0.209482 -1.286462 1.166311 -3.007112 7.059472 0 0 0 0 0 0
$definebone "L Finger11" "L Finger1" 1.38252 0.000001 0.000002 -0.000002 5.705114 0 0 0 0 0 0 0
$definebone "L Finger12" "L Finger11" 0.865905 -0.000002 -0.000002 -0.000002 1.676706 0 0 0 0 0 0 0
$definebone "L Finger2" "L Hand" 2.813033 -0.266275 -0.544265 -0.52317 -4.898962 4.980264 0 0 0 0 0 0
$definebone "L Finger21" "L Finger2" 1.445751 0.000001 0 -0.000002 8.189859 0.000002 0 0 0 0 0 0
$definebone "L Finger22" "L Finger21" 1.053752 -0.000001 0.000001 -0.000002 -1.493989 0.000002 0 0 0 0 0 0
$definebone "L Finger3" "L Hand" 2.689438 -0.34286 0.236188 -0.363544 -3.72474 7.4665 0 0 0 0 0 0
$definebone "L Finger31" "L Finger3" 1.439796 -0.000002 0 -0.000002 3.307802 0 0 0 0 0 0 0
$definebone "L Finger32" "L Finger31" 0.982989 0.000002 -0.000001 -0.000002 -5.220044 0.000002 0 0 0 0 0 0
$definebone "L Finger4" "L Hand" 2.426953 -0.353603 1.013783 -0.77424 -8.678419 5.197187 0 0 0 0 0 0
$definebone "L Finger41" "L Finger4" 1.104664 0.000001 0.000001 -0.000002 4.531697 0 0 0 0 0 0 0
$definebone "L Finger42" "L Finger41" 0.908442 0 0 -0.000002 -3.232686 0 0 0 0 0 0 0
$definebone "L ForeTwist" "L Forearm" 0 0 0 0 0.000001 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist1" "L ForeTwist" 1.217918 -0.000002 0 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist2" "L ForeTwist1" 1.217918 -0.000002 -0.000002 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist3" "L ForeTwist2" 1.217917 -0.000001 -0.000003 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist4" "L ForeTwist3" 1.217916 0.000002 -0.000001 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist5" "L ForeTwist4" 1.217918 0 -0.000002 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "L ForeTwist6" "L ForeTwist5" 1.217916 -0.000001 0.000001 0 0.000002 -0.152006 0 0 0 0 0 0
$definebone "R Clavicle" "" 0.47538 8.830965 -9.976974 -0.000019 -179.999938 -180.000007 0 0 0 0 0 0
$definebone "R UpperArm" "R Clavicle" 5.853648 0.000001 0 -2.606709 -90.521181 90.385902 0 0 0 0 0 0
$definebone "R Forearm" "R UpperArm" 10.390536 -0.000001 0 0 -6.123427 0 0 0 0 0 0 0
$definebone "R Hand" "R Forearm" 8.525425 0.000001 0 -2.753062 3.862882 91.214711 0 0 0 0 0 0
$definebone "R Finger0" "R Hand" 0.555141 0.315171 0.822496 -36.110715 33.914174 -115.151567 0 0 0 0 0 0
$definebone "R Finger01" "R Finger0" 1.556972 0 0 0 9.529331 -0.000003 0 0 0 0 0 0
$definebone "R Finger02" "R Finger01" 1.221089 -0.000002 0 -0.000002 13.764634 -0.000003 0 0 0 0 0 0
$definebone "R Finger1" "R Hand" 2.828091 -0.209481 1.286462 -1.166311 -3.007112 -7.059471 0 0 0 0 0 0
$definebone "R Finger11" "R Finger1" 1.382519 0 -0.000002 0.000002 5.705111 0.000002 0 0 0 0 0 0
$definebone "R Finger12" "R Finger11" 0.86591 0 0.000003 0.000002 1.676701 0.000002 0 0 0 0 0 0
$definebone "R Finger2" "R Hand" 2.813031 -0.266276 0.544263 0.523168 -4.89896 -4.980265 0 0 0 0 0 0
$definebone "R Finger21" "R Finger2" 1.445756 0 0 0.000001 8.189859 -0.000002 0 0 0 0 0 0
$definebone "R Finger22" "R Finger21" 1.05375 0 -0.000003 0.000002 -1.493987 -0.000002 0 0 0 0 0 0
$definebone "R Finger3" "R Hand" 2.689441 -0.34286 -0.236188 0.363542 -3.72474 -7.4665 0 0 0 0 0 0
$definebone "R Finger31" "R Finger3" 1.439795 0 0.000002 0.000001 3.307801 0.000001 0 0 0 0 0 0
$definebone "R Finger32" "R Finger31" 0.982989 0 0.000001 0.000001 -5.220045 0 0 0 0 0 0 0
$definebone "R Finger4" "R Hand" 2.426953 -0.353604 -1.013783 0.774238 -8.678419 -5.197187 0 0 0 0 0 0
$definebone "R Finger41" "R Finger4" 1.104667 0 0.000001 0 4.531694 0 0 0 0 0 0 0
$definebone "R Finger42" "R Finger41" 0.908442 0 0.000002 0 -3.232686 0.000001 0 0 0 0 0 0
$definebone "R ForeTwist" "R Forearm" 0 0 0 0 0.000001 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist1" "R ForeTwist" 1.217917 0.000001 0 0 0.000003 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist2" "R ForeTwist1" 1.217918 -0.000002 0 0 0.000002 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist3" "R ForeTwist2" 1.217918 0.000001 0 0 0.000002 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist4" "R ForeTwist3" 1.217916 0 0 0 0.000002 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist5" "R ForeTwist4" 1.217918 0 0 0 0.000002 0.152006 0 0 0 0 0 0
$definebone "R ForeTwist6" "R ForeTwist5" 1.217916 0 0 0 0.000002 0.152006 0 0 0 0 0 0
$definebone "Pin_2_M18" "" -3.94309 -10.7332 -2.83199 3.063399 -72.291228 12.219929 0 0 0 0 0 0
$definebone "Spoon_M18" "" -3.6079 -10.8229 -4.59017 3.063399 -72.291228 12.219929 0 0 0 0 0 0
$definebone "Weapon_M18" "" -3.15358 -11.2296 -5.96515 3.063399 -72.291228 12.219929 0 0 0 0 0 0
$definebone "Pin_Pull" "" -3.58203 -10.5338 -2.75155 4.383717 -71.438097 14.245106 0 0 0 0 0 0
$definebone "Pin_M18" "Pin_Pull" 0.088232 -0.032794 -0.02657 -7.092301 4.506653 32.103911 0 0 0 0 0 0

$bonemerge "L Clavicle"
$bonemerge "L UpperArm"
$bonemerge "L Forearm"
$bonemerge "L Hand"
$bonemerge "L Finger0"
$bonemerge "L Finger01"
$bonemerge "L Finger02"
$bonemerge "L Finger1"
$bonemerge "L Finger11"
$bonemerge "L Finger12"
$bonemerge "L Finger2"
$bonemerge "L Finger21"
$bonemerge "L Finger22"
$bonemerge "L Finger3"
$bonemerge "L Finger31"
$bonemerge "L Finger32"
$bonemerge "L Finger4"
$bonemerge "L Finger41"
$bonemerge "L Finger42"
$bonemerge "L ForeTwist"
$bonemerge "L ForeTwist1"
$bonemerge "L ForeTwist2"
$bonemerge "L ForeTwist3"
$bonemerge "L ForeTwist4"
$bonemerge "L ForeTwist5"
$bonemerge "L ForeTwist6"
$bonemerge "R Clavicle"
$bonemerge "R UpperArm"
$bonemerge "R Forearm"
$bonemerge "R Hand"
$bonemerge "R Finger0"
$bonemerge "R Finger01"
$bonemerge "R Finger02"
$bonemerge "R Finger1"
$bonemerge "R Finger11"
$bonemerge "R Finger12"
$bonemerge "R Finger2"
$bonemerge "R Finger21"
$bonemerge "R Finger22"
$bonemerge "R Finger3"
$bonemerge "R Finger31"
$bonemerge "R Finger32"
$bonemerge "R Finger4"
$bonemerge "R Finger41"
$bonemerge "R Finger42"
$bonemerge "R ForeTwist"
$bonemerge "R ForeTwist1"
$bonemerge "R ForeTwist2"
$bonemerge "R ForeTwist3"
$bonemerge "R ForeTwist4"
$bonemerge "R ForeTwist5"
$bonemerge "R ForeTwist6"

$jigglebone "Pin_M18"
{
	is_flexible
	{
		length 20
		tip_mass 0
		pitch_stiffness 700
		pitch_damping 8
		yaw_stiffness 700
		yaw_damping 8
		along_stiffness 100
		along_damping 0
		pitch_constraint -45.000002 45.000002
		pitch_friction 0
		pitch_bounce 0
		yaw_constraint -15.000001 15.000001
		yaw_friction 0
		yaw_bounce 0
	}
}

// The 32 below is a guess until further is known about the format.
$animblocksize 32 nostall

$bonesaveframe "(null)" position
$bonesaveframe "L Clavicle" position
$bonesaveframe "R Clavicle" position
$bonesaveframe "Pin_2_M18" position
$bonesaveframe "Spoon_M18" position
$bonesaveframe "Weapon_M18" position
$bonesaveframe "Pin_Pull" position

$sectionframes 30 40

$ikchain "rhand" "R Hand" knee 0.707 0.707 0
$ikchain "lhand" "L Hand" knee 0.707 0.707 0

$sequence "base_idle" {
	"v_m18_anims\base_idle.smd"
	activity "ACT_VM_IDLE" 1
	fadein 0.2
	fadeout 0.2
	fps 30
	loop
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "base_draw" {
	"v_m18_anims\base_draw.smd"
	activity "ACT_VM_DRAW" 1
	{ event 5004 0 "Universal.GrenadeDraw" }
	fadein 0.2
	fadeout 0.2
	fps 30
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "base_holster" {
	"v_m18_anims\base_holster.smd"
	activity "ACT_VM_HOLSTER" 1
	{ event 5004 0 "Universal.GrenadeHolster" }
	fadein 0.2
	fadeout 0.2
	fps 35
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "base_down" {
	"v_m18_anims\base_down.smd"
	activity "ACT_VM_DOWN" 1
	fadein 0.2
	fadeout 0.2
	fps 30
	loop
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "base_crawl" {
	"v_m18_anims\base_crawl.smd"
	activity "ACT_VM_CRAWL" 1
	{ event 5004 10 "Universal.RightCrawl" }
	{ event 5004 20 "Universal.LeftCrawl" }
	fadein 0.2
	fadeout 0.2
	fps 29
	loop
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "base_sprint" {
	"v_m18_anims\base_sprint.smd"
	activity "ACT_VM_SPRINT" 1
	fadein 0.2
	fadeout 0.2
	fps 25
	loop
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "pullbackhigh" {
	"v_m18_anims\pullbackhigh.smd"
	activity "ACT_VM_PULLBACK_HIGH" 1
	{ event 5004 19 "Weapon_smokegrenade.PinPull" }
	{ event 5004 20 "Weapon_smokegrenade.ArmDraw" }
	{ event 3900 32 "" }
	fadein 0.2
	fadeout 0.2
	fps 30
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "pullbackhighbake" {
	"v_m18_anims\pullbackhighbake.smd"
	activity "ACT_VM_PULLBACK_HIGH_BAKE" 1
	{ event 5004 19 "Weapon_smokegrenade.PinPull" }
	{ event AE_WPN_PULL_SPOON 23 "" }
	{ event 5004 34 "Weapon_smokegrenade.ArmDraw" }
	{ event 3900 41 "" }
	fadein 0.2
	fadeout 0.2
	fps 30
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "pullbacklow" {
	"v_m18_anims\pullbacklow.smd"
	activity "ACT_VM_PULLBACK_LOW" 1
	{ event 5004 19 "Weapon_smokegrenade.PinPull" }
	{ event 5004 20 "Weapon_smokegrenade.ArmDraw" }
	{ event 3900 32 "" }
	fadein 0.2
	fadeout 0.2
	fps 30
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "throw" {
	"v_m18_anims\throw.smd"
	activity "ACT_VM_THROW" 1
	{ event 5004 3 "Weapon_smokegrenade.ArmThrow" }
	{ event AE_WPN_PULL_SPOON 3 "" }
	{ event 3005 3 "" }
	fadein 0.2
	fadeout 0.2
	fps 31.5
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "throwback" {
	"v_m18_anims\throwback.smd"
	activity "ACT_VM_PICKUP" 1
	{ event 5004 14 "Weapon_smokegrenade.ArmDraw" }
	{ event 3900 25 "" }
	fadein 0.2
	fadeout 0.2
	fps 30
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "bakethrow" {
	"v_m18_anims\bakethrow.smd"
	activity "ACT_VM_SECONDARYATTACK" 1
	{ event 5004 3 "Weapon_smokegrenade.ArmThrow" }
	{ event 3013 3 "" }
	fadein 0.2
	fadeout 0.2
	fps 31.5
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}

$sequence "lowthrow" {
	"v_m18_anims\lowthrow.smd"
	activity "ACT_VM_HAULBACK" 1
	{ event 5004 6 "Weapon_smokegrenade.ArmThrow" }
	{ event 3016 6 "" }
	fadein 0.2
	fadeout 0.2
	fps 31.5
	ikrule "rhand" touch "Weapon_M18"
	ikrule "lhand" release
}
